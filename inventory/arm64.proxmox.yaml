---
plugin: community.proxmox.proxmox
url: https://pve04.l.nicholaswilde.io
validate_certs: false
want_facts: true

user: root@pam
token_id: ansible
# password file .vault_pass
token_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39393335636637333835393066613966346230643661613766333963303031383437616634356563
          3136663735346461373832336461386534396364323631620a336165323632353866393433653364
          36653762356131366664636461383266313530633764333166333633613735303666326633326232
          3732366632383331650a646562323961613032356231626635306361333364333731636530393538
          30613261326332356466336464653832356132373965306363323635383530386337643633633566
          3331396464303332343135656136333332383463623636663638

# This tells the plugin to get IPs for LXC containers
# want_proxmox_lxc_interfaces: true

# Set the ansible_host to the IP address
compose:
  ansible_host: proxmox_agent_interfaces[1]['ip-addresses'][0] | default(proxmox_net0.ip) | ansible.utils.ipaddr('address')
  ansible_user: "'root'"
